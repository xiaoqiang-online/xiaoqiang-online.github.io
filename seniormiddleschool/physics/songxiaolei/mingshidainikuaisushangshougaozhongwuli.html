<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>名师带你快速上手高中物理</title>
    <style type="text/css">
        h1 {
            font-size: 23px;
        }
		h2 {
            font-size: 23px;
			color: blue;
        }

        /* 整体布局容器 */
        .container {
            display: flex;
            align-items: center;
        }

        /* 视频容器 */
        .video-container {
            flex: 3;
        }

        /* 按钮（菜单）容器 */
        .button-container {
            flex: 2;
            text-align: center;
        }

        /* 视频样式 */
        video {
            width: 100%;
        }

        /* 按钮通用样式 */
        button {
            padding: 10px 20px;
            font-size: 16px;
        }

        /* 视频选择容器样式 */
        #video-selection-container {
            width: 1000px;
            height: 570px;
            border: 1px solid #ccc;
            overflow-y: auto;
            position: relative;
            font-family: Arial, sans-serif;
        }

        /* 隐藏子菜单 */
        ul ul {
            display: none;
            list-style-type: none;
            padding-left: 20px;
        }

        /* 菜单项按钮样式 */
        .menu-item {
            background-color: #f9f9f9;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            width: 100%;
            text-align: left;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .menu-item:hover {
            background-color: #e9e9e9;
        }

        /* 滚动条样式 */
        #video-selection-container::-webkit-scrollbar {
            width: 8px;
        }

        #video-selection-container::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        #video-selection-container::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }

        #video-selection-container::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* 符号元素样式 */
        .menu-item .symbol {
            margin-right: 5px;
            width: 10px;
            text-align: center;
        }

        /* 加号样式 */
        .menu-item .symbol.plus::before {
            content: '+';
        }

        /* 减号样式 */
        .menu-item .symbol.minus::before {
            content: '-';
        }

        /* 高亮样式 */
        .menu-item.highlight {
            background-color: #d3d3d3;
        }
    </style>
</head>

<body>
    <h1 id="名师带你快速上手高中物理"> 高中物理（宋晓磊）/名师带你快速上手高中物理</h1>
	<h2 id="Title"> 1了解电路（上）</h2>
    <div class="container">
        <!-- 嵌入 B 站视频 -->
        <iframe id="bilibili-video" src="https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76141944&p=1"
                width="1000" height="750" frameborder="no" scrolling="no" allowfullscreen="allowfullscreen" high_quality=1>
        </iframe>
        <div id="video-selection-container">
            <button class="menu-item" onclick="toggleSubMenu(this)"> <span class="symbol minus"></span>名师带你快速上手高中物理</button>
            <ul class="default-open">
                <li>
                    <button class="menu-item" onclick="toggleSubMenu(this)"> <span class="symbol minus"></span>1了解电路（上）</button>
                    <ul class="default-open">
                        <li><button class="menu-item" data-time="0" onclick="jumpToTime('1了解电路（上）',0,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76141944&p=1')">1.1开场(0:0)</button></li>
                        <li>
                            <button class="menu-item" onclick="toggleSubMenu(this)"> <span class="symbol minus"></span>1.2电荷</button>
                            <ul class="default-open">
                                <li><button class="menu-item" data-time="1" onclick="jumpToTime('1了解电路（上）',60*5+16,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76141944&p=1')">1.2.1电荷(05:16)</button></li>
                                <li><button class="menu-item" data-time="2" onclick="jumpToTime('1了解电路（上）',60*7+34,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76141944&p=1')">1.2.2正负电荷(07:34)</button></li>
                                <li><button class="menu-item" data-time="3" onclick="jumpToTime('1了解电路（上）',60*8+0,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76141944&p=1')">1.2.3带电现象(08:00)</button></li>
                                <li><button class="menu-item" data-time="4" onclick="jumpToTime('1了解电路（上）',60*10+0,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76141944&p=1')">1.2.4验电器(10:00)</button></li>
                                <li><button class="menu-item" data-time="5" onclick="jumpToTime('1了解电路（上）',60*15+52,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76141944&p=1')">1.2.5带电方式：摩擦起电、接触起电、感应起电(15:52)</button></li>
                            </ul>
                        </li>
                        <li>
                            <button class="menu-item" onclick="toggleSubMenu(this)"> <span class="symbol minus"></span>1.3电路</button>
                            <ul class="default-open">
                                <li><button class="menu-item" data-time="6" onclick="jumpToTime('1了解电路（上）',60*37+0,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76141944&p=1')">1.3.1电路(37:00)</button></li>
                                <li><button class="menu-item" data-time="7" onclick="jumpToTime('1了解电路（上）',60*37+44,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76141944&p=1')">1.3.2类型和构造：通路、开路、短路(37:44)</button></li>
                                <li><button class="menu-item" data-time="8" onclick="jumpToTime('1了解电路（上）',60*43+30,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76141944&p=1')">1.3.3原件符号：定值电路、滑动变阻器(43:30)</button></li>
                            </ul>
							<button class="menu-item" onclick="toggleSubMenu(this)"> <span class="symbol minus"></span>1.4电路规律</button>
                            <ul class="default-open">
                                <li><button class="menu-item" data-time="9" onclick="jumpToTime('1了解电路（上）',60*50+40,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76141944&p=1')">1.3.1电阻：电阻公式、电阻定律(50:40)</button></li>
                            </ul>
                        </li>
                    </ul>
                </li>  <!-- 1了解电路（上） -->
                <li>
                    <button class="menu-item" onclick="toggleSubMenu(this)"> <span class="symbol minus"></span>2了解电路（下）</button>
                    <ul class="default-open">
                        <li><button class="menu-item" data-time="10" onclick="jumpToTime('2了解电路（下）',0,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76147083&p=2')">2.1电阻（续）：导体、半导体、绝缘体、超导体、单位欧姆(0:0)</button></li>
						<button class="menu-item" onclick="toggleSubMenu(this)"> <span class="symbol minus"></span>2.2电流</button>
                            <ul class="default-open">
                                <li><button class="menu-item" data-time="11" onclick="jumpToTime('2了解电路（下）',60*3+30,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76147083&p=2')">2.2.1电流：直流电流(3:30)</button></li>
								<li><button class="menu-item" data-time="11" onclick="jumpToTime('2了解电路（下）',60*4+20,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76147083&p=2')">2.2.2方向(4:20)</button></li>
								<li><button class="menu-item" data-time="11" onclick="jumpToTime('2了解电路（下）',60*7+0,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76147083&p=2')">2.2.3大小(7:00)</button></li>
                            </ul>
						<li><button class="menu-item" data-time="11" onclick="jumpToTime('2了解电路（下）',60*11+50,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76147083&p=2')">2.3电压(11:50)</button></li>
						<li><button class="menu-item" data-time="11" onclick="jumpToTime('2了解电路（下）',60*14+45,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76147083&p=2')">2.4欧姆定律(14:45)</button></li>
						<li><button class="menu-item" data-time="11" onclick="jumpToTime('2了解电路（下）',60*14+45,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76147083&p=2')">2.5欧姆定律(14:45)</button></li>
                    </ul>
                </li> <!-- 2了解电路（下） -->
				<li>
                    <button class="menu-item" onclick="toggleSubMenu(this)"> <span class="symbol minus"></span>3电路分析（上）</button>
                    <ul class="default-open">
                        <li><button class="menu-item" data-time="10" onclick="jumpToTime('3电路分析（上）',0,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76151846&p=3')">3.1开场：智能化开关(0:0)</button></li>
						<li><button class="menu-item" data-time="10" onclick="jumpToTime('3电路分析（上）',60*16+30,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76151846&p=3')">3.2电路分析(16:30)</button></li>
						<li><button class="menu-item" data-time="10" onclick="jumpToTime('3电路分析（上）',60*18+35,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76151846&p=3')">3.2串联电路：电流特征、电阻特征、电压特征、电功率特征(18:35)</button></li>
						<li><button class="menu-item" data-time="10" onclick="jumpToTime('3电路分析（上）',60*39+0,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76151846&p=3')">3.3并联电路：电流特征、电阻特征、电压特征、电功率特征(39:00)</button></li>
                    </ul>
                </li> <!-- 3电路分析（上） -->
				<li>
                    <button class="menu-item" onclick="toggleSubMenu(this)"> <span class="symbol minus"></span>4电路分析（下）</button>
                    <ul class="default-open">
                        <li><button class="menu-item" data-time="10" onclick="jumpToTime('4电路分析（下）',0,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76162851&p=4')">例题(0:0)</button></li>
						<li><button class="menu-item" data-time="10" onclick="jumpToTime('4电路分析（下）',60*7+15,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76162851&p=4')">电功和电功率(7:15)</button></li>
						<li><button class="menu-item" data-time="10" onclick="jumpToTime('4电路分析（下）',60*9+20,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76162851&p=4')">电流做功(9:20)</button></li>
						<li><button class="menu-item" data-time="10" onclick="jumpToTime('4电路分析（下）',60*11+30,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76162851&p=4')">电功公式(11:30)</button></li>
						<li><button class="menu-item" data-time="10" onclick="jumpToTime('4电路分析（下）',60*14+30,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76162851&p=4')">电功率公式(14:30)</button></li>
                    </ul>
                </li> <!-- 4电路分析（下） -->
				<li>
                    <button class="menu-item" onclick="toggleSubMenu(this)"> <span class="symbol minus"></span>5电与磁（上）</button>
                    <ul class="default-open">
                        <li><button class="menu-item" data-time="10" onclick="jumpToTime('5电与磁（上）',60*0+0,'https://player.bilibili.com/player.html?isOutside=true&aid=43494015&bvid=BV1Bb411U7db&cid=76174032&p=5')">复习电路(0:0)</button></li>
                    </ul>
                </li> <!-- 5电与磁（上） -->
            </ul>
        </div>
    </div>
	 <li></li>
    <script>
        /**
         * 切换子菜单的显示状态
         * @param {HTMLElement} button - 点击的按钮元素
         */
        function toggleSubMenu(button) {
            const parentLi = button.parentNode;
            const subMenu = parentLi.querySelector('ul');
            const symbol = button.querySelector('.symbol');
            if (subMenu) {
                if (subMenu.style.display === 'none' || subMenu.style.display === '') {
                    subMenu.style.display = 'block';
                    // 切换为减号样式
                    symbol.classList.remove('plus');
                    symbol.classList.add('minus');
                } else {
                    subMenu.style.display = 'none';
                    // 切换为加号样式
                    symbol.classList.remove('minus');
                    symbol.classList.add('plus');
                }
            }
        }

        /**
         * 页面加载时展开默认的子菜单
         */
        window.onload = function () {
            const defaultOpenMenus = document.querySelectorAll('.default-open');
            defaultOpenMenus.forEach(function (menu) {
                menu.style.display = 'block';
            });
            highlightMenuItemByTime();
			
			// 获取 iframe 元素
			const iframe = document.getElementById('bilibili-video');
			if (iframe) 
			{
				// 向 B 站播放器发送获取当前时间的消息
				iframe.contentWindow.postMessage({ cmd: 'getCurrentTime' }, '*');

				// 每隔一段时间（例如 1 秒）主动询问播放器当前时间，以实现实时更新
				setInterval(() => {
					iframe.contentWindow.postMessage({ cmd: 'getCurrentTime' }, '*');
				}, 1000);
        }
        };
		
		/**
         * 检查视频播放进度并更新菜单高亮
         */
        function checkVideoProgress() {
            
        }
		
		window.addEventListener('message', function (event) {
			if (event.data && event.data.cmd ==='seek') {
				// 这里的 event.data.currentTime 就是当前播放进度（秒数）
				highlightMenuItemByTime(event.data.currentTime);
			}
		});

        /**
         * 跳转到视频指定时间
         * @param {number} seconds - 要跳转的时间（秒）
         * @param {string} src - 视频的源地址
         */
        function jumpToTime(title, seconds, src) {
			const textElement = document.getElementById('Title');
			textElement.textContent = title;
		
            var videoFrame = document.getElementById('bilibili-video');
            if (src !== videoFrame.src) {
                videoFrame.src = src;
            }
            // 检查是否已经存在时间参数
            if (videoFrame.src.includes('&t=')) {
                // 如果存在，替换时间参数
                videoFrame.src = videoFrame.src.replace(/&t=\d+/, '&t=' + seconds);
            } else {
                // 如果不存在，添加时间参数
                videoFrame.src += '&t=' + seconds;
            }
            // highlightMenuItemByTime(seconds);
        }

        /**
         * 根据当前时间高亮显示菜单项
         * @param {number} [seconds] - 可选参数，指定的时间（秒），如果未提供则从 URL 中获取
         */
        function highlightMenuItemByTime(seconds) {

            const menuItems = document.querySelectorAll('.menu-item[data-time]');
            const videoFrame = document.getElementById('bilibili-video');
            if (!time) {
                const url = videoFrame.src;
                const match = url.match(/&t=(\d+)/);
                time = match ? parseInt(match[1]) : 0;
            }
            menuItems.forEach(item => {
                item.classList.remove('highlight');
                const itemTime = parseInt(item.dataset.time);
                if (itemTime <= seconds) {
                   item.classList.add('highlight');
                }
            });
        }
    </script>
</body>

</html>